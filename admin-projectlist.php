<?php
    session_name("latresse-php");
    session_start();

    // if (!isset($_SESSION["userid"])) {
    //     header("Location: ./register.php");
    //     exit;
    // }

    // if (isset($_SESSION["userid"])) {
        // require_once "./modules/config.php";

        // $sql = "SELECT * FROM projects ORDER BY pj_id DESC";

        // $query = $pdo-> prepare($sql);
        // $query-> setFetchMode(PDO::FETCH_ASSOC);

        // if ($query-> execute()) {
        //     $results = $query-> fetchAll();
        // };
    // }

    require_once "./includes/header-admin.php";
?>

    <main id="main-dash">

        <!-- Date et heure -->

        <section id="datetime">

            <article id="date-hour">
                <div id="date">
                    <svg id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m512 169c0-33.41 0-56.783 0-59 0-24.813-20.187-45-45-45h-6v55c0 8.284-6.716 15-15 15s-15-6.716-15-15c0-16.839 0-63.232 0-80 0-8.284-6.716-15-15-15s-15 6.716-15 15v25h-100v55c0 8.284-6.716 15-15 15s-15-6.716-15-15c0-16.839 0-63.232 0-80 0-8.284-6.716-15-15-15s-15 6.716-15 15v25h-100v55c0 8.284-6.716 15-15 15s-15-6.716-15-15c0-16.839 0-63.232 0-80 0-8.284-6.716-15-15-15s-15 6.716-15 15v25h-36c-24.813 0-45 20.187-45 45v59z"/><path d="m0 199v243c0 24.813 20.187 45 45 45h422c24.813 0 45-20.187 45-45 0-6.425 0-146.812 0-243-9.335 0-506.836 0-512 0zm144 208h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm128 128h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm128 128h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-32c-8.284 0-15-6.716-15-15s6.716-15 15-15h32c8.284 0 15 6.716 15 15s-6.716 15-15 15z"/></g></svg>
                    <h5><?php date_default_timezone_set("Europe/Paris"); echo date('d/m/Y'); ?></h5>
                </div>
                <div id="hour">
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M437.02,74.981C388.668,26.629,324.38,0,256,0S123.332,26.629,74.98,74.981C26.628,123.333,0,187.62,0,256s26.628,132.668,74.98,181.019C123.332,485.37,187.62,512,256,512s132.668-26.629,181.02-74.981C485.372,388.667,512,324.38,512,256S485.372,123.332,437.02,74.981z M256,461.752c-113.453,0-205.752-92.3-205.752-205.752c0-0.186,0.006-0.37,0.007-0.554c0-0.047-0.007-0.092-0.007-0.139c0-0.079,0.01-0.155,0.012-0.233c0.499-112.093,91.086-203.29,202.944-204.79c0.234-0.011,0.466-0.035,0.703-0.035c0.142,0,0.28,0.017,0.421,0.021c0.558-0.004,1.114-0.021,1.673-0.021c113.453,0,205.752,92.3,205.752,205.752S369.453,461.752,256,461.752z"/></g></g><g><g><path d="M412.287,268.36c-8.366,0-15.148-6.782-15.148-15.148c0-8.366,6.782-15.148,15.148-15.148h18.259c-8.576-84.076-76.762-150.773-161.492-157.035v15.895c0,8.366-6.782,15.148-15.148,15.148c-8.366,0-15.148-6.782-15.148-15.148V81.391c-83.476,8.18-149.969,75.102-157.492,158.766h16.352c8.366,0,15.148,6.782,15.148,15.148c0,8.366-6.782,15.148-15.148,15.148H81.142c6.965,85.011,74.791,153.045,159.71,160.342v-19.203c0-8.366,6.782-15.148,15.148-15.148c8.366,0,15.148,6.782,15.148,15.148v19.203c85.614-7.357,153.853-76.451,159.867-162.435H412.287z M317.32,216.102l-50.608,50.609c-2.841,2.841-6.693,4.437-10.711,4.437c-4.017,0-7.871-1.596-10.711-4.437l-88.093-88.093c-5.916-5.915-5.916-15.506,0-21.422c5.915-5.916,15.506-5.916,21.422,0l77.383,77.382L295.9,194.68c5.915-5.916,15.506-5.916,21.422,0C323.236,200.595,323.236,210.187,317.32,216.102z"/></g></g></svg>
                    <h5><?php date_default_timezone_set("Europe/Paris"); echo date('H:m:s'); ?></h5>
                </div>
            </article>

        </section>

        <!-- Tableau de gestion -->

        <section class="content-section">

            <article class="card-section">

                <div class="title-section">
                    <h2>Liste des projets</h2>
                </div>

                <div class="table-section">

                    <table>

                        <thead>

                            <tr>
                                <th>Nom</th>
                                <th>Description</th>
                                <th>Date de cr√©ation</th>
                                <th>Voir le projet</th>
                                <th>Clore le projet</th>
                            </tr>

                        </thead>

                        <tbody>

                            <?php if (isset($results)) :
                                foreach ($results as $ligne) : ?>

                                    <tr>
                                        <td>
                                            <?= $ligne["pj_title"]; ?>
                                        </td>
                                        <td>
                                            <?= $ligne["pj_description"]; ?>
                                        </td>
                                        <td>
                                            <?= $ligne["pj_creation_date"]; ?>
                                        </td>
                                        <td>
                                            <button type="button" class="seeProject">
                                                <svg id="bold" enable-background="new 0 0 24 24" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m9.707 19.121c-.187.188-.442.293-.707.293s-.52-.105-.707-.293l-5.646-5.647c-.586-.586-.586-1.536 0-2.121l.707-.707c.586-.586 1.535-.586 2.121 0l3.525 3.525 9.525-9.525c.586-.586 1.536-.586 2.121 0l.707.707c.586.586.586 1.536 0 2.121z"/></g></svg>
                                            </button>
                                        </td>
                                        <td>
                                            <button type="button" class="supprProject">
                                                <svg height="365.696pt" viewBox="0 0 365.696 365.696" width="365.696pt" xmlns="http://www.w3.org/2000/svg"><path d="m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0"/></svg>
                                            </button>
                                        </td>
                                    </tr>

                                <?php endforeach;
                            endif; ?>

                        </tbody>

                    </table>

                </div>

            </article>

        </section>


    </main>

<?php
    require_once "./includes/footer-admin.php";
?>